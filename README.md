# JavaPaymentsOrders

Проект представляет собой микросервисное приложение для управления заказами и оплатами.
Система разработана на базе Spring Boot , использует Docker , Gradle (Kotlin DSL) , PostgreSQL , 
Kafka и другие компоненты: Flyway , OpenAPI / Swagger UI , Transactional Outbox Pattern .

---

## Архитектура

* API Gateway
    * Внешний порт: 8080

    * Маршрутизирует запросы к другим микросервисам

    * Поддерживает Swagger через проксирование

* Payments Service
    * Внешний порт: 8081

    * Управляет счетами пользователей

    * Слушает события из Kafka

* Orders Service
    * Внешний порт: 8082

    * Управляет созданием заказов

    * Использует PostgreSQL для хранения данных о заказах

    * Отправляет события в Kafka при создании заказа

* Kafka + Zookeeper
    * Позволяет обмениваться событиями между микросервисами
  
    * Поддерживает асинхронный обмен сообщениями

* PostgreSQL
    * Две БД: order-db и payment-db

    * Для миграций используется Flyway

### Структура репозитория

```plaintext
order-payment-system/
├── orders-service/             # Сервис управления заказами
├── payments-service/           # Сервис управления платежами
├── docker-compose.yml          # Описание контейнеров
├── settings.gradle.kts         # Настройки проекта
└── README.md
```

## Запуск

Перейдите в корневую директорию и напишите в терминал:

```
docker compose up
```

После запуска, документация для каждого микросервиса и управление ими доступны на Swagger по:
http://localhost:8080/swagger-ui.html

Возможны задержки с загрузкой. Если Swagger не открывается сразу после запуска, нужно немного подождать.